#ifndef CHIP_8_H
#define CHIP_8_H

#include <stack>
#include <stdint.h>
#include <vector>

#define MEMORY_SIZE 4096
#define DISPLAY_HEIGHT 32
#define DISPLAY_WIDTH 64
#define NUMBER_OF_GENERAL_REGISTERS 16
#define FONT_MEMORY_ADDRESS 0x50

const uint8_t font[80] = {
  0xF0, 0x90, 0x90, 0x90, 0xF0, 
  0x20, 0x60, 0x20, 0x20, 0x70, 
  0xF0, 0x10, 0xF0, 0x80, 0xF0, 
  0xF0, 0x10, 0xF0, 0x10, 0xF0, 
  0x90, 0x90, 0xF0, 0x10, 0x10, 
  0xF0, 0x80, 0xF0, 0x10, 0xF0, 
  0xF0, 0x80, 0xF0, 0x90, 0xF0, 
  0xF0, 0x10, 0x20, 0x40, 0x40, 
  0xF0, 0x90, 0xF0, 0x90, 0xF0, 
  0xF0, 0x90, 0xF0, 0x10, 0xF0, 
  0xF0, 0x90, 0xF0, 0x90, 0x90, 
  0xE0, 0x90, 0xE0, 0x90, 0xE0, 
  0xF0, 0x80, 0x80, 0x80, 0xF0, 
  0xE0, 0x90, 0x90, 0x90, 0xE0, 
  0xF0, 0x80, 0xF0, 0x80, 0xF0, 
  0xF0, 0x80, 0xF0, 0x80, 0x80
};

class Chip_8 {
  public:
    /* Construtor*/
    Chip_8();
    /* Decreases delay timer by 1 if its value is bigger than 0 */
    void decrease_delay_timer();
    /* Decreases sound timer by 1 if its value is bigger than 0 */
    void decrease_sound_timer();
  private:
    /* Memory - 4KB */
    std::vector<uint8_t> _memory;
    /* Display - 64x32 pixels */
    std::vector<std::vector<bool>> _display;
    /* Program counter */
    uint16_t _program_counter;
    /* Index register */
    uint16_t _index_register;
    /* Stack for 16-bit addresses */
    std::stack<uint16_t> _stack;
    /* Delay timer */
    uint8_t _delay_timer;
    /* Sound timer */
    uint8_t _sound_timer;
    /* 16 8-bit general registers */
    std::vector<uint8_t> _vs;
};

#endif